<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ACME Credential Issuer</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-container">
      <aside class="sidebar">
        <div class="sidebar-header">
          <img src="logo.svg" alt="ACME Logo" class="logo" />
          <h1>ACME Issuer</h1>
        </div>
        <nav class="main-nav">
          <ul>
            <li>
              <a href="#" id="homeBtn" class="nav-item active"
                ><i class="fas fa-home"></i> Dashboard</a
              >
            </li>
            <li>
              <a href="#" id="templatesBtn" class="nav-item"
                ><i class="fas fa-file-alt"></i> Templates</a
              >
            </li>
            <li>
              <a href="#" id="issueBtn" class="nav-item"
                ><i class="fas fa-certificate"></i> Issue Credentials</a
              >
            </li>
          </ul>
        </nav>
        <div class="sidebar-footer">
          <a href="#" class="settings-link"
            ><i class="fas fa-cog"></i> Settings</a
          >
        </div>
      </aside>

      <main class="main-content">
        <header class="content-header">
          <div class="page-title">
            <h2 id="currentPageTitle">Dashboard</h2>
          </div>
          <div class="user-menu">
            <button class="user-menu-btn">
              <span class="user-avatar">AC</span>
              <span class="user-name">Admin</span>
            </button>
          </div>
        </header>

        <div class="content-container">
          <section id="home" class="page active">
            <div class="welcome-banner">
              <h3>Welcome to the ACME Credential Issuer Portal</h3>
              <p>
                Manage and issue verifiable credentials quickly and securely.
              </p>
            </div>

            <div class="stats-container">
              <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-file-alt"></i></div>
                <div class="stat-info">
                  <h4>Total Templates</h4>
                  <p id="templateCount">0</p>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-certificate"></i></div>
                <div class="stat-info">
                  <h4>Credentials Issued</h4>
                  <p id="credentialCount">0</p>
                </div>
              </div>
            </div>

            <div class="quick-actions">
              <h3>Quick Actions</h3>
              <div class="action-cards">
                <div class="action-card" data-action="templates">
                  <div class="card-icon"><i class="fas fa-file-alt"></i></div>
                  <div class="card-content">
                    <h4>Manage Templates</h4>
                    <p>Create and edit credential templates</p>
                  </div>
                </div>
                <div class="action-card" data-action="issue">
                  <div class="card-icon">
                    <i class="fas fa-certificate"></i>
                  </div>
                  <div class="card-content">
                    <h4>Issue Credentials</h4>
                    <p>Create and issue new credentials</p>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section id="templates" class="page">
            <div class="page-actions">
              <button id="newTemplateBtn" class="btn primary-btn">
                <i class="fas fa-plus"></i> New Template
              </button>
            </div>

            <div class="search-container">
              <div class="search-input">
                <i class="fas fa-search"></i>
                <input
                  type="text"
                  id="templateSearch"
                  placeholder="Search templates..."
                />
              </div>
            </div>

            <div id="templatesList" class="templates-grid">
              <div class="loading-indicator">
                <div class="spinner"></div>
                <p>Loading templates...</p>
              </div>
            </div>
          </section>

          <section id="templateEditor" class="page">
            <div class="breadcrumb">
              <a href="#" id="backToTemplates">Templates</a> /
              <span id="editorBreadcrumb">New Template</span>
            </div>

            <form id="templateForm" class="card-form">
              <div class="form-section">
                <h3>Basic Information</h3>
                <div class="form-row">
                  <div class="form-group">
                    <label for="templateName"
                      >Name <span class="required">*</span></label
                    >
                    <input type="text" id="templateName" required />
                  </div>
                </div>
                <div class="form-group">
                  <label for="templateDescription"
                    >Description <span class="required">*</span></label
                  >
                  <input type="text" id="templateDescription" required />
                </div>
              </div>

              <div class="form-section">
                <div class="section-header">
                  <h3>Template Fields</h3>
                  <button
                    type="button"
                    id="addFieldBtn"
                    class="btn secondary-btn"
                  >
                    <i class="fas fa-plus"></i> Add Field
                  </button>
                </div>
                <div id="fieldsContainer" class="fields-container"></div>
              </div>

              <div class="form-actions">
                <button
                  type="button"
                  id="cancelTemplateBtn"
                  class="btn secondary-btn"
                >
                  Cancel
                </button>
                <button type="submit" class="btn primary-btn">
                  <i class="fas fa-save"></i> Save Template
                </button>
              </div>
            </form>
          </section>
          <section id="pkpassDesigner" class="page">
            <div class="breadcrumb">
              <a href="#" id="backToTemplateEditor">Back to Template Editor</a>
              <span>Apple Wallet Pass Design</span>
            </div>
            <form id="pkpassForm" class="card-form">
              <div class="pkpass-designer-flex">
                <!-- Left: Inputs -->

                <div class="pkpass-designer-inputs">
                  <div class="form-section">
                    <h3>Design Your Apple Wallet Pass</h3>

                    <div class="form-group">
                      <label for="pkpassDescription"
                        >Display Name in Apple Wallet</label
                      >
                      <input
                        type="text"
                        id="pkpassDescription"
                        placeholder="Description"
                      />
                    </div>
                    <div class="form-group">
                      <label for="pkpassLogoText">Logo Text</label>
                      <input
                        type="text"
                        id="pkpassLogoText"
                        placeholder="Logo Text"
                      />
                    </div>
                    <div class="form-group">
                      <label for="pkpassLogo">Logo Image</label>
                      <input
                        type="file"
                        id="pkpassLogo"
                        accept="image/*"
                        style="margin-bottom: 0.5em"
                      />
                      <img
                        id="pkpassLogoPreview"
                        src=""
                        alt="Logo Preview"
                        style="
                          display: none;
                          max-width: 100%;
                          border-radius: 8px;
                          margin-top: 0.5em;
                        "
                      />
                    </div>
                    <div class="form-group">
                      <label for="pkpassThumbnail">Thumbnail Image</label>
                      <input
                        type="file"
                        id="pkpassThumbnail"
                        accept="image/*"
                        style="margin-bottom: 0.5em"
                      />
                      <img
                        id="pkpassThumbnailPreview"
                        src=""
                        alt="Thumbnail Preview"
                        style="
                          display: none;
                          max-width: 100%;
                          border-radius: 8px;
                          margin-top: 0.5em;
                        "
                      />
                    </div>
                    <div id="pkpassFieldsContainer"></div>
                    <div
                      class="form-group"
                      style="display: flex; gap: 1em; align-items: flex-end"
                    >
                      <select id="addPkpassFieldType">
                        <option value="">Add Field...</option>
                        <option value="primary">Primary</option>
                        <option value="secondary">Secondary</option>
                        <option value="auxiliary">Auxiliary</option>
                      </select>
                      <button
                        type="button"
                        id="addPkpassFieldBtn"
                        class="btn secondary-btn"
                      >
                        Add Field
                      </button>
                    </div>
                    <div class="form-row">
                      <div class="form-group" style="flex: 1">
                        <label for="pkpassBackgroundColor"
                          >Background Color</label
                        >
                        <input
                          type="color"
                          id="pkpassBackgroundColor"
                          class="styled-color"
                          value="#FFFFFF"
                        />
                      </div>
                      <div class="form-group" style="flex: 1">
                        <label for="pkpassTextColor">Text Color</label>
                        <input
                          type="color"
                          id="pkpassTextColor"
                          class="styled-color"
                          value="#000000"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="form-actions">
                    <button
                      type="button"
                      id="pkpassBackBtn"
                      class="btn secondary-btn"
                    >
                      Back
                    </button>
                    <button type="submit" class="btn primary-btn">
                      Save & Finish
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </section>
          <section id="issueCredential" class="page">
            <div class="issuance-stepper">
              <div class="step active" data-step="select">
                <div class="step-number">1</div>
                <div class="step-label">Select Template</div>
              </div>
              <div class="step-connector"></div>
              <div class="step" data-step="fill">
                <div class="step-number">2</div>
                <div class="step-label">Fill Details</div>
              </div>
              <div class="step-connector"></div>
              <div class="step" data-step="issue">
                <div class="step-number">3</div>
                <div class="step-label">Issue Credential</div>
              </div>
            </div>
            <div id="selectTemplateStep" class="issuance-step active">
              <div class="template-selector">
                <h3>Choose a Credential Template</h3>
                <div class="search-container">
                  <div class="search-input">
                    <i class="fas fa-search"></i>
                    <input
                      type="text"
                      id="issueTemplateSearch"
                      placeholder="Search templates..."
                    />
                  </div>
                </div>
                <div id="issueTemplateGrid" class="templates-grid compact">
                  <!-- Templates will be loaded here -->
                </div>
              </div>

              <div class="form-actions">
                <button
                  id="continueToDetailsBtn"
                  class="btn primary-btn"
                  disabled
                >
                  Continue
                </button>
              </div>
            </div>

            <div id="credentialForm" class="issuance-step">
              <div class="template-info">
                <h3 id="selectedTemplateName"></h3>
                <p id="selectedTemplateDescription"></p>
              </div>

              <form id="issueForm" class="card-form">
                <div class="form-section">
                  <h3>Credential Details</h3>
                  <div id="templateFieldsContainer"></div>
                </div>

                <div class="form-actions">
                  <button
                    type="button"
                    id="backToSelectBtn"
                    class="btn secondary-btn"
                  >
                    Back
                  </button>
                  <button type="submit" class="btn primary-btn">
                    Issue Credential
                  </button>
                </div>
              </form>
            </div>

            <div id="credentialResult" class="issuance-step">
              <div class="success-animation">
                <i class="fas fa-check-circle"></i>
              </div>
              <h3>Credential Issued Successfully!</h3>

              <div class="qr-container">
                <div id="qrCode"></div>
              </div>

              <p class="help-text">
                Scan the QR code with a compatible wallet to receive your
                credential
              </p>

              <div class="url-container">
                <h4>Credential Offer URL</h4>
                <div class="copy-url">
                  <input type="text" id="credentialOfferUrl" readonly />
                  <button id="copyUrlBtn" class="btn icon-btn">
                    <i class="fas fa-copy"></i>
                  </button>
                </div>
              </div>

              <div class="form-actions centered">
                <button id="issueNewBtn" class="btn primary-btn">
                  Issue Another Credential
                </button>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>

    <!-- Templates for dynamic content -->
    <template id="fieldTemplate">
      <div class="field-item">
        <div
          class="field-header"
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <h4 class="field-title">Field</h4>
          <button
            type="button"
            class="remove-field"
            title="Remove field"
            style="
              background: none;
              border: none;
              font-size: 1.2em;
              cursor: pointer;
            "
          >
            &times;
          </button>
        </div>
        <div class="field-body">
          <div class="form-row">
            <div class="form-group">
              <label>Field Name<span class="required">*</span></label>
              <input type="text" class="field-name" required />
            </div>
            <div class="form-group">
              <label>Field Type <span class="required">*</span></label>
              <select class="field-type">
                <option value="text">Text</option>
                <option value="number">Number</option>
                <option value="email">Email</option>
                <option value="date">Date</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label>Description <span class="optional">(optional)</span></label>
            <input type="text" class="field-description" />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>
                <input type="checkbox" class="field-required" /> Required
              </label>
            </div>
            <div class="form-group">
              <label>
                <input type="checkbox" class="field-selective" /> Selectively
                Disclosable
              </label>
            </div>
          </div>
        </div>
      </div>
    </template>

    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script src="https://unpkg.com/browser-image-compression/dist/browser-image-compression.js"></script>
    <script src="app.js"></script>
  </body>
</html>
